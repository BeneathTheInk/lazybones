<!DOCTYPE html>

<html>
<head>
  <title>Lazybones</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="index.html">
                  README.md
                </a>
              
                
                <a class="source" href="document.html">
                  document.js
                </a>
              
                
                <a class="source" href="lazybones.html">
                  lazybones.js
                </a>
              
                
                <a class="source" href="sync.html">
                  sync.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1>Lazybones</h1>
<p>Lazybones is a modified Backbone collection that integrates with PouchDB. By combining Backbone’s object-oriented approach with PouchDB’s super flexible databases, Lazybones provides a highly-functional API for storing and manipulating data in the browser and Node.js.</p><h2>Install</h2>
<p>Download the latest version from our <a href="https://github.com/BeneathTheInk/lazybones/releases">release page</a> and use via a script tag. The variable <code>Lazybones</code> will be attached to <code>window</code>.</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"lazybones.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>If using Browserify or Node.js, you can install via NPM and use via <code>require(&quot;lazybones&quot;)</code>.</p><pre><code class="lang-shell">$ npm install lazybones
</code></pre>
<h2>Basic Usage</h2>
<p>Lazybones is a modified Backbone collection with a custom sync function that allows for fetching and writing to a Pouch database. To begin using Lazybones, you only need the name of the database you are using:</p><pre><code class="lang-javascript"><span class="hljs-keyword">var</span> db = <span class="hljs-keyword">new</span> Lazybones(<span class="hljs-string">"mydb"</span>);
</code></pre>
<p>This will return an empty backbone collection attached to a newly initiated PouchDB instance. This instance if available via <code>db.pouch</code> although you should rarely need access to it.</p><p>At this point you can load in documents from the database into memory. The easiest way to do this is via a normal fetch:</p><pre><code class="lang-javascript">db.fetch().then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-comment">// collection now contains everything in PouchDB</span>
});
</code></pre>
<p>Using fetch, you can also retrieve specific subsets of documents, for example only those in a specific CouchDB view. Just add <code>filter: &quot;myview&quot;</code> to fetch options. All the other standard Backbone sync options are available too.</p><p>Lazybones also provides a method for continuously listening to changes in the database and replicating them to the in-memory documents:</p><pre><code class="lang-javascript">db.connect();

<span class="hljs-comment">// later</span>
db.disconnect();
</code></pre>
<p>When <code>.connect()</code> is called, the database will listen to the database changes feed and automatically push changes to documents in the collection. This means that <code>connect</code>, in a lot of ways, is like fetch with the exception that it continually updates the documents.</p><h2>Documentation</h2>
<p>We have <a href="http://beneaththeink.github.io/lazybones/lazybones.html">pretty HTML docs</a> with inline source code hosted on Github Pages. This documentation is generated from block-level comments in the code using <a href="https://github.com/BeneathTheInk/doxxo">Doxxo</a>, so you can also build them locally.</p><pre><code class="lang-bash">npm run build-docs
</code></pre>
<h2>How to Build from Scratch</h2>
<p>Lazybones uses Grunt to build a Browserify bundle from the original source found in <code>lib/</code>. When the command below completes, the compiled source will be saved to <code>dist/</code> directory.</p><pre><code class="lang-bash">npm install &amp;&amp; grunt
</code></pre>
<p>If you don’t the Grunt cli tools installed globally, run <code>npm install -g grunt-cli</code> before running that command.</p><h2>Running the Unit Tests</h2>
<p>Lazybones has several unit tests written for Node.js and the browser. Before running tests, install all test dependencies:</p><pre><code>npm install
</code></pre><p>To get tests running on Node.js, run:</p><pre><code>npm test
</code></pre><p>To run tests in the browser, start a test server with this command. When the server is running, navigate your browser to <a href="http://localhost:8000">http://localhost:8000</a>.</p><pre><code>npm run dev
</code></pre>
            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
